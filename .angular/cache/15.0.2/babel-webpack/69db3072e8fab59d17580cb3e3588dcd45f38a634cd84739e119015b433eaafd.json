{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Validators } from '@angular/forms';\nimport { IonContent } from '@ionic/angular';\nimport { environment } from '../../../../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../../../services/conn-api/conn-api.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@ionic/angular\";\nimport * as i5 from \"../../../../../services/data/data.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../../../../../components/location/location.component\";\nfunction LocationsPage_ion_grid_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-grid\")(1, \"div\", 2)(2, \"ion-button\", 3);\n    i0.ɵɵlistener(\"click\", function LocationsPage_ion_grid_1_Template_ion_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.isAdding(true));\n    });\n    i0.ɵɵtext(3, \"Sammelstandort hinzuf\\u00FCgen\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction LocationsPage_ion_grid_2_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \"Pflichtfeld\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LocationsPage_ion_grid_2_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Maximal-L\\u00E4nge von \", ctx_r7.maxInput, \" Zeichen \\u00FCberschritten\");\n  }\n}\nfunction LocationsPage_ion_grid_2_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Maximal-L\\u00E4nge von \", ctx_r8.maxInput, \" Zeichen \\u00FCberschritten\");\n  }\n}\nfunction LocationsPage_ion_grid_2_span_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \"Pflichtfeld\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LocationsPage_ion_grid_2_span_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Maximal-L\\u00E4nge von \", ctx_r10.maxInput, \" Zeichen \\u00FCberschritten\");\n  }\n}\nfunction LocationsPage_ion_grid_2_span_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \"Pflichtfeld\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LocationsPage_ion_grid_2_span_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Maximal-L\\u00E4nge von \", ctx_r12.maxInput, \" Zeichen \\u00FCberschritten\");\n  }\n}\nfunction LocationsPage_ion_grid_2_span_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \"Pflichtfeld\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LocationsPage_ion_grid_2_span_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \"Ung\\u00FCltige Eingabe\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LocationsPage_ion_grid_2_span_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \"Pflichtfeld\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LocationsPage_ion_grid_2_span_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Maximal-L\\u00E4nge von \", ctx_r16.maxInput, \" Zeichen \\u00FCberschritten\");\n  }\n}\nconst _c0 = function () {\n  return {\n    standalone: true\n  };\n};\nfunction LocationsPage_ion_grid_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-grid\")(1, \"div\", 4)(2, \"div\", 5)(3, \"span\", 6);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"form\", 7);\n    i0.ɵɵlistener(\"ngSubmit\", function LocationsPage_ion_grid_2_Template_form_ngSubmit_5_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.onSaveAdd());\n    });\n    i0.ɵɵelementStart(6, \"ion-row\")(7, \"ion-col\", 8)(8, \"ion-item\", 9)(9, \"ion-label\", 10);\n    i0.ɵɵtext(10, \"Name*\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"ion-textarea\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, LocationsPage_ion_grid_2_span_12_Template, 2, 0, \"span\", 12);\n    i0.ɵɵtemplate(13, LocationsPage_ion_grid_2_span_13_Template, 2, 1, \"span\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"ion-col\", 8)(15, \"ion-item\", 9)(16, \"ion-label\", 10);\n    i0.ɵɵtext(17, \"Website\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"ion-textarea\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, LocationsPage_ion_grid_2_span_19_Template, 2, 1, \"span\", 12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"ion-row\")(21, \"ion-col\", 8)(22, \"ion-item\", 9)(23, \"ion-label\", 10);\n    i0.ɵɵtext(24, \"Stra\\u00DFe*\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(25, \"ion-textarea\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(26, LocationsPage_ion_grid_2_span_26_Template, 2, 0, \"span\", 12);\n    i0.ɵɵtemplate(27, LocationsPage_ion_grid_2_span_27_Template, 2, 1, \"span\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"ion-col\", 8)(29, \"ion-item\", 9)(30, \"ion-label\", 10);\n    i0.ɵɵtext(31, \"Nummer*\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(32, \"ion-input\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(33, LocationsPage_ion_grid_2_span_33_Template, 2, 0, \"span\", 12);\n    i0.ɵɵtemplate(34, LocationsPage_ion_grid_2_span_34_Template, 2, 1, \"span\", 12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(35, \"ion-row\")(36, \"ion-col\", 8)(37, \"ion-item\", 9)(38, \"ion-label\", 10);\n    i0.ɵɵtext(39, \"PLZ*\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(40, \"ion-input\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(41, LocationsPage_ion_grid_2_span_41_Template, 2, 0, \"span\", 12);\n    i0.ɵɵtemplate(42, LocationsPage_ion_grid_2_span_42_Template, 2, 0, \"span\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"ion-col\", 8)(44, \"ion-item\", 9)(45, \"ion-label\", 10);\n    i0.ɵɵtext(46, \"Stadt*\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(47, \"ion-textarea\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(48, LocationsPage_ion_grid_2_span_48_Template, 2, 0, \"span\", 12);\n    i0.ɵɵtemplate(49, LocationsPage_ion_grid_2_span_49_Template, 2, 1, \"span\", 12);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(50, \"ion-row\", 18)(51, \"ion-col\", 19)(52, \"ion-item\", 20)(53, \"ion-label\", 21);\n    i0.ɵɵtext(54, \"\\u00D6ffentlich zug\\u00E4nglich und auf \");\n    i0.ɵɵelementStart(55, \"a\", 22);\n    i0.ɵɵtext(56, \"Standortkarte\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(57, \" anzeigen lassen\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(58, \"ion-toggle\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function LocationsPage_ion_grid_2_Template_ion_toggle_ngModelChange_58_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.bAccessEdit = $event);\n    })(\"ionChange\", function LocationsPage_ion_grid_2_Template_ion_toggle_ionChange_58_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.onToggleAccess($event));\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(59, \"ion-row\", 24)(60, \"ion-col\", 8)(61, \"ion-button\", 25);\n    i0.ɵɵlistener(\"click\", function LocationsPage_ion_grid_2_Template_ion_button_click_61_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.bAdd ? ctx_r21.onSaveAdd() : ctx_r21.onSaveEdit());\n    });\n    i0.ɵɵtext(62);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(63, \"ion-col\", 8)(64, \"ion-button\", 26);\n    i0.ɵɵlistener(\"click\", function LocationsPage_ion_grid_2_Template_ion_button_click_64_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.bAdd ? ctx_r22.isAdding(false) : ctx_r22.isEditing(false));\n    });\n    i0.ɵɵtext(65, \"Abbrechen \");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.bEdit ? \"Sammelstandort bearbeiten\" : \"Sammelstandort hinzuf\\u00FCgen\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.fgLocation);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.bSubmitted && (ctx_r1.errorControl.cName.errors == null ? null : ctx_r1.errorControl.cName.errors.required));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.bSubmitted && (ctx_r1.errorControl.cName.errors == null ? null : ctx_r1.errorControl.cName.errors.maxlength));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.bSubmitted && (ctx_r1.errorControl.cWebsite.errors == null ? null : ctx_r1.errorControl.cWebsite.errors.maxlength));\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.bSubmitted && (ctx_r1.errorControl.cStreet.errors == null ? null : ctx_r1.errorControl.cStreet.errors.required));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.bSubmitted && (ctx_r1.errorControl.cStreet.errors == null ? null : ctx_r1.errorControl.cStreet.errors.maxlength));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.bSubmitted && (ctx_r1.errorControl.cStreetNumber.errors == null ? null : ctx_r1.errorControl.cStreetNumber.errors.required));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.bSubmitted && (ctx_r1.errorControl.cStreetNumber.errors == null ? null : ctx_r1.errorControl.cStreetNumber.errors.maxlength));\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.bSubmitted && (ctx_r1.errorControl.cZip.errors == null ? null : ctx_r1.errorControl.cZip.errors.required));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.bSubmitted && ((ctx_r1.errorControl.cZip.errors == null ? null : ctx_r1.errorControl.cZip.errors.minlength) || (ctx_r1.errorControl.cZip.errors == null ? null : ctx_r1.errorControl.cZip.errors.maxlength)));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.bSubmitted && (ctx_r1.errorControl.cCity.errors == null ? null : ctx_r1.errorControl.cCity.errors.required));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.bSubmitted && (ctx_r1.errorControl.cCity.errors == null ? null : ctx_r1.errorControl.cCity.errors.maxlength));\n    i0.ɵɵadvance(9);\n    i0.ɵɵpropertyInterpolate(\"checked\", ctx_r1.bAccessEdit);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.bAccessEdit)(\"ngModelOptions\", i0.ɵɵpureFunction0(17, _c0));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.bAdd ? \"Hinzuf\\u00FCgen\" : \"\\u00C4nderungen \\u00FCbernehmen\");\n  }\n}\nfunction LocationsPage_ion_grid_3_app_location_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-location\", 31);\n    i0.ɵɵlistener(\"ping\", function LocationsPage_ion_grid_3_app_location_6_Template_app_location_ping_0_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r25.ping($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const location_r24 = ctx.$implicit;\n    i0.ɵɵproperty(\"oLocation\", location_r24);\n  }\n}\nfunction LocationsPage_ion_grid_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-grid\")(1, \"div\", 28)(2, \"div\", 5)(3, \"span\", 6);\n    i0.ɵɵtext(4, \"Aktive Sammelstandorte\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 29);\n    i0.ɵɵtemplate(6, LocationsPage_ion_grid_3_app_location_6_Template, 1, 1, \"app-location\", 30);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.lLocationsNotActive.length > 0 ? \"block-element\" : \"block-element-bottom\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.lLocationsActive);\n  }\n}\nfunction LocationsPage_ion_grid_4_app_location_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-location\", 31);\n    i0.ɵɵlistener(\"ping\", function LocationsPage_ion_grid_4_app_location_6_Template_app_location_ping_0_listener($event) {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r29 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r29.ping($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const location_r28 = ctx.$implicit;\n    i0.ɵɵproperty(\"oLocation\", location_r28);\n  }\n}\nfunction LocationsPage_ion_grid_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-grid\")(1, \"div\", 32)(2, \"div\", 5)(3, \"span\", 6);\n    i0.ɵɵtext(4, \"Inaktive Sammelstandorte\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 29);\n    i0.ɵɵtemplate(6, LocationsPage_ion_grid_4_app_location_6_Template, 1, 1, \"app-location\", 30);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.lLocationsNotActive);\n  }\n}\nexport let LocationsPage = /*#__PURE__*/(() => {\n  class LocationsPage {\n    constructor(router, connApi, formBuilder, toastController, alertController, dataService) {\n      this.router = router;\n      this.connApi = connApi;\n      this.formBuilder = formBuilder;\n      this.toastController = toastController;\n      this.alertController = alertController;\n      this.dataService = dataService;\n      //Constants\n      this.maxZip = environment.maxZip;\n      this.maxInput = environment.maxInput;\n      // Urls\n      this.urlLocation = 'collector/location';\n      this.urlLocationActive = 'collector/location/active';\n      this.urlLocations = 'collector/locations';\n      // FormBuilder\n      this.fgLocation = this.formBuilder.group({\n        cName: ['', [Validators.required, Validators.maxLength(this.maxInput)]],\n        cWebsite: ['', [Validators.maxLength(this.maxInput)]],\n        cStreet: ['', [Validators.required, Validators.maxLength(this.maxInput)]],\n        cStreetNumber: ['', [Validators.required, Validators.maxLength(this.maxInput)]],\n        cZip: ['', [Validators.required, Validators.minLength(this.maxZip), Validators.maxLength(this.maxZip)]],\n        cCity: ['', [Validators.required, Validators.maxLength(this.maxInput)]]\n      });\n      // Variables\n      this.bEdit = false;\n      this.bAdd = false;\n      this.bSubmitted = false;\n      this.lLocationsActive = [];\n      this.lLocationsNotActive = [];\n      this.oLocationEdit = null;\n      this.bAccessEdit = false;\n    }\n    ngOnInit() {\n      this.load();\n    }\n    load() {\n      this.lLocationsActive = [];\n      this.lLocationsNotActive = [];\n      // Get Locations\n      this.connApi.safeGet(this.urlLocations).subscribe(response => {\n        console.log(response.body);\n        let lLocations = response.body;\n        lLocations.forEach(location => {\n          if (location.bActive == 1) {\n            this.lLocationsActive.push(location);\n          } else {\n            this.lLocationsNotActive.push(location);\n          }\n        });\n        if (lLocations.length == 0) this.bAdd = true;\n      });\n    }\n    onSaveAdd() {\n      this.bSubmitted = true;\n      // check for invalid input\n      if (!this.fgLocation.valid) {\n        this.alertInvalid();\n        return;\n      }\n      // prepare\n      let location = {\n        cName: this.fgLocation.get('cName').value,\n        cWebsite: this.fgLocation.get('cWebsite').value,\n        cStreet: this.fgLocation.get('cStreet').value,\n        cStreetNumber: this.fgLocation.get('cStreetNumber').value,\n        cZip: this.fgLocation.get('cZip').value,\n        cCity: this.fgLocation.get('cCity').value,\n        bAccess: this.bAccessEdit ? 1 : 0\n      };\n      // send\n      this.connApi.safePut(this.urlLocation, location).subscribe(data => {\n        if (data.status == 200) {\n          this.dataService.callLocation(null);\n          this.bAdd = false;\n          this.bSubmitted = false;\n          const location = data.body;\n          this.lLocationsNotActive.push(location);\n          this.alertAdded(location);\n          this.fgLocation.reset();\n          this.bAccessEdit = false;\n        }\n      }, error => {\n        console.log(error);\n        if (error.status == 406) {\n          this.alertLocationForgiven();\n        }\n      });\n    }\n    onSaveEdit() {\n      this.bSubmitted = true;\n      // check for invalid input\n      if (!this.fgLocation.valid) {\n        this.alertInvalid();\n        return;\n      }\n      // prepare\n      this.oLocationEdit.cName = this.fgLocation.get('cName').value;\n      this.oLocationEdit.cWebsite = this.fgLocation.get('cWebsite').value;\n      this.oLocationEdit.cStreet = this.fgLocation.get('cStreet').value;\n      this.oLocationEdit.cStreetNumber = this.fgLocation.get('cStreetNumber').value;\n      this.oLocationEdit.cZip = this.fgLocation.get('cZip').value;\n      this.oLocationEdit.cCity = this.fgLocation.get('cCity').value;\n      this.oLocationEdit.bAccess = this.bAccessEdit ? 1 : 0;\n      // send\n      this.connApi.safePost(this.urlLocation, this.oLocationEdit).subscribe(data => {\n        if (data.status == 200) {\n          this.dataService.callLocation(null);\n          this.bEdit = false;\n          this.bSubmitted = false;\n          this.fgLocation.reset();\n          this.oLocationEdit = null;\n          this.bAccessEdit = false;\n        }\n      }, error => {\n        console.log(error);\n        if (error.status == 406) {\n          this.alertLocationForgiven();\n        }\n      });\n    }\n    get errorControl() {\n      return this.fgLocation.controls;\n    }\n    ping($event) {\n      const location = $event.object;\n      if ('check' === $event.label) {\n        this.upload(location);\n        if (location.bActive) {\n          this.lLocationsActive.push(location);\n          this.lLocationsNotActive.splice(this.lLocationsNotActive.indexOf(location), 1);\n        } else {\n          this.lLocationsNotActive.push(location);\n          this.lLocationsActive.splice(this.lLocationsActive.indexOf(location), 1);\n        }\n      }\n      if ('edit' == $event.label) {\n        this.onEdit(location);\n      }\n      if ('delete' == $event.label) {\n        this.onDelete(location);\n      }\n    }\n    upload(location) {\n      console.log(location);\n      this.connApi.safePost(this.urlLocation, location).subscribe(response => {\n        console.log(response);\n      }, error => {\n        console.log(error);\n      });\n    }\n    onEdit(location) {\n      this.oLocationEdit = location;\n      this.bAccessEdit = location.bAccess == 1;\n      this.isEditing(true);\n      // data\n      this.fgLocation.controls['cName'].setValue(location.cName);\n      this.fgLocation.controls['cWebsite'].setValue(location.cWebsite);\n      this.fgLocation.controls['cStreetNumber'].setValue(location.cStreetNumber);\n      this.fgLocation.controls['cStreet'].setValue(location.cStreet);\n      this.fgLocation.controls['cZip'].setValue(location.cZip);\n      this.fgLocation.controls['cCity'].setValue(location.cCity);\n      // scroll to top\n      this.content.scrollToTop(400);\n    }\n    onDelete(location) {\n      this.alertDelete(location);\n    }\n    isAdding(bAdd) {\n      this.bAdd = bAdd;\n      if (!bAdd) {\n        this.fgLocation.reset();\n      } else {\n        this.bEdit = false;\n      }\n    }\n    isEditing(bEdit) {\n      this.bEdit = bEdit;\n      if (!bEdit) {\n        this.fgLocation.reset();\n        this.oLocationEdit = null;\n      } else {\n        this.bAdd = false;\n      }\n    }\n    alertInvalid() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const alert = yield this.alertController.create({\n          header: 'Fehlerhafte Eingabe',\n          message: 'Bitte überprüfe deine Daten und korrigiere diese an den markierten Stellen.',\n          cssClass: 'my-alert',\n          buttons: ['Ok']\n        });\n        yield alert.present();\n      });\n    }\n    // Toasts\n    toastSaved() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const toast = yield this.toastController.create({\n          message: 'Deine Daten wurden erfolgreich gespeichert.',\n          duration: 2500,\n          cssClass: 'my-toast',\n          position: 'bottom'\n        });\n        yield toast.present();\n      });\n    }\n    alertLocationForgiven() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const alert = yield this.alertController.create({\n          header: 'Hinzufügen nicht möglich',\n          subHeader: 'Sammelstandort existiert bereits',\n          message: 'Bitte prüfe ob an diesem Sammelstandort bereits eine Mobile-Box steht, falls nicht melde dich bitte per Mail bei uns, damit wir diesen Standort freigeben können.',\n          cssClass: 'my-alert',\n          buttons: ['Ok']\n        });\n        yield alert.present();\n      });\n    }\n    alertDelete(locaction) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const alert = yield this.alertController.create({\n          header: 'Wirklich löschen?',\n          subHeader: locaction.cName,\n          cssClass: 'my-alert',\n          buttons: [{\n            text: 'Bestätigen',\n            handler: () => {\n              console.log(locaction.id);\n              this.connApi.safeDelete(this.urlLocation + \"/\" + locaction.id).subscribe(response => {\n                this.dataService.callLocation(null);\n                console.log(response);\n                if (locaction.bActive == 1) {\n                  this.lLocationsActive.splice(this.lLocationsActive.indexOf(locaction), 1);\n                } else {\n                  this.lLocationsNotActive.splice(this.lLocationsNotActive.indexOf(locaction), 1);\n                }\n              }, error => {\n                console.log(error);\n              });\n            }\n          }, {\n            text: 'Abrechen',\n            role: 'cancel'\n          }]\n        });\n        yield alert.present();\n      });\n    }\n    alertAdded(locaction) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const alert = yield this.alertController.create({\n          header: 'Sammelstandort hinzugefügt',\n          subHeader: locaction.cName,\n          message: 'Wir haben diesen Sammelstandort zunächst auf inaktiv gesetzt. Wenn dort bereits eine Sammelbox steht, klicke bitte auf Aktivieren. Wenn du bereits eine Sammelbox für diesen Sammelstandort vorliegen hast, diese aber erst ' + 'später aufstellen möchtest, klicke bitte auf später und aktiviere den Sammelstandort sobald die Sammelbox aufgestellt wurde. Dazu klickst du bitte auf die Checkbox des Sammelstandortes. Wenn du für diesen Sammelstandort noch keine Sammelbox ' + 'vorliegen hast und auch noch keine bestellt hast, klicke bitte auf Bestellen.',\n          cssClass: 'my-alert',\n          buttons: [{\n            text: 'Aktivieren',\n            handler: () => {\n              // prepare\n              let data = {\n                id: locaction.id\n              };\n              this.connApi.safePost(this.urlLocationActive, data).subscribe(response => {\n                this.load();\n              });\n            }\n          }, {\n            text: 'Später'\n          }, {\n            text: 'Bestellen',\n            handler: () => {\n              this.router.navigate(['collector/menu/order/tabs/add']);\n            }\n          }]\n        });\n        yield alert.present();\n      });\n    }\n    onToggleAccess($event) {}\n  }\n  LocationsPage.ɵfac = function LocationsPage_Factory(t) {\n    return new (t || LocationsPage)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ConnApiService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.ToastController), i0.ɵɵdirectiveInject(i4.AlertController), i0.ɵɵdirectiveInject(i5.DataService));\n  };\n  LocationsPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LocationsPage,\n    selectors: [[\"app-locations\"]],\n    viewQuery: function LocationsPage_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(IonContent, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.content = _t.first);\n      }\n    },\n    decls: 5,\n    vars: 4,\n    consts: [[\"id\", \"locations\", 1, \"input-background\"], [4, \"ngIf\"], [1, \"block-button-outside-top-content\"], [1, \"ion-button-outside\", 3, \"click\"], [1, \"block-element-top\"], [1, \"block-head\"], [1, \"text-head\"], [3, \"formGroup\", \"ngSubmit\"], [\"size-xl\", \"6\", \"size-lg\", \"6\", \"size-md\", \"12\", \"size-sm\", \"12\", \"size-xs\", \"12\"], [\"lines\", \"full\"], [\"position\", \"floating\", 1, \"input-label\"], [\"rows\", \"1\", \"auto-grow\", \"true\", \"type\", \"text\", \"formControlName\", \"cName\"], [\"class\", \"input-invalid\", 4, \"ngIf\"], [\"rows\", \"1\", \"auto-grow\", \"true\", \"type\", \"text\", \"formControlName\", \"cWebsite\"], [\"rows\", \"1\", \"auto-grow\", \"true\", \"type\", \"text\", \"formControlName\", \"cStreet\"], [\"type\", \"text\", \"formControlName\", \"cStreetNumber\"], [\"type\", \"text\", \"formControlName\", \"cZip\"], [\"rows\", \"1\", \"auto-grow\", \"true\", \"type\", \"text\", \"formControlName\", \"cCity\"], [1, \"ion-row-toggle\"], [\"size-xl\", \"12\", \"size-lg\", \"12\", \"size-md\", \"12\", \"size-sm\", \"12\", \"size-xs\", \"12\"], [1, \"ion-item-toggle-check\"], [1, \"ion-label-toggle\"], [\"target\", \"_blank\", \"rel\", \"noopener noreferrer\", \"href\", \"https://www.mobile-box.eu/handys-spenden/abgeben\"], [3, \"ngModel\", \"checked\", \"ngModelOptions\", \"ngModelChange\", \"ionChange\"], [1, \"ion-row-buttons\"], [1, \"ion-button-one-inside\", 3, \"click\"], [1, \"ion-button-two-inside\", 3, \"click\"], [1, \"input-invalid\"], [3, \"ngClass\"], [1, \"list-block\"], [3, \"oLocation\", \"ping\", 4, \"ngFor\", \"ngForOf\"], [3, \"oLocation\", \"ping\"], [1, \"block-element-bottom\"]],\n    template: function LocationsPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-content\", 0);\n        i0.ɵɵtemplate(1, LocationsPage_ion_grid_1_Template, 4, 0, \"ion-grid\", 1);\n        i0.ɵɵtemplate(2, LocationsPage_ion_grid_2_Template, 66, 18, \"ion-grid\", 1);\n        i0.ɵɵtemplate(3, LocationsPage_ion_grid_3_Template, 7, 2, \"ion-grid\", 1);\n        i0.ɵɵtemplate(4, LocationsPage_ion_grid_4_Template, 7, 1, \"ion-grid\", 1);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.bEdit && !ctx.bAdd);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.bEdit || ctx.bAdd);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.lLocationsActive.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.lLocationsNotActive.length > 0);\n      }\n    },\n    dependencies: [i6.NgClass, i6.NgForOf, i6.NgIf, i3.ɵNgNoValidate, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i4.IonButton, i4.IonCol, i4.IonContent, i4.IonGrid, i4.IonInput, i4.IonItem, i4.IonLabel, i4.IonRow, i4.IonTextarea, i4.IonToggle, i4.BooleanValueAccessor, i4.TextValueAccessor, i3.FormGroupDirective, i3.FormControlName, i7.LocationComponent],\n    styles: [\"[_ngcontent-%COMP%]:root{--colortest: #111111;--ion-color-primary: #8BC34A;--ion-color-primary-light: #9cbb7a;--ion-color-primary-rgb: 56, 128, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #5260ff;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #757575;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9;--ion-toolbar-background: #8BC34A}@media (prefers-color-scheme: dark){body[_ngcontent-%COMP%]{--ion-color-primary: #428cff;--ion-color-primary-rgb: 66,140,255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #3a7be0;--ion-color-primary-tint: #5598ff;--ion-color-secondary: #50c8ff;--ion-color-secondary-rgb: 80,200,255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255,255,255;--ion-color-secondary-shade: #46b0e0;--ion-color-secondary-tint: #62ceff;--ion-color-tertiary: #6a64ff;--ion-color-tertiary-rgb: 106,100,255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #5d58e0;--ion-color-tertiary-tint: #7974ff;--ion-color-success: #2fdf75;--ion-color-success-rgb: 47,223,117;--ion-color-success-contrast: #000000;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #29c467;--ion-color-success-tint: #44e283;--ion-color-warning: #ffd534;--ion-color-warning-rgb: 255,213,52;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0,0,0;--ion-color-warning-shade: #e0bb2e;--ion-color-warning-tint: #ffd948;--ion-color-danger: #757575;--ion-color-danger-rgb: 255,73,97;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255,255,255;--ion-color-danger-shade: #e04055;--ion-color-danger-tint: #ff5b71;--ion-color-dark: #f4f5f8;--ion-color-dark-rgb: 244,245,248;--ion-color-dark-contrast: #000000;--ion-color-dark-contrast-rgb: 0,0,0;--ion-color-dark-shade: #d7d8da;--ion-color-dark-tint: #f5f6f9;--ion-color-medium: #989aa2;--ion-color-medium-rgb: 152,154,162;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0,0,0;--ion-color-medium-shade: #86888f;--ion-color-medium-tint: #a2a4ab;--ion-color-light: #222428;--ion-color-light-rgb: 34,36,40;--ion-color-light-contrast: #ffffff;--ion-color-light-contrast-rgb: 255,255,255;--ion-color-light-shade: #1e2023;--ion-color-light-tint: #383a3e}.ios[_ngcontent-%COMP%]   body[_ngcontent-%COMP%]{--ion-background-color: #000000;--ion-background-color-rgb: 0,0,0;--ion-text-color: #ffffff;--ion-text-color-rgb: 255,255,255;--ion-color-step-50: #0d0d0d;--ion-color-step-100: #1a1a1a;--ion-color-step-150: #262626;--ion-color-step-200: #333333;--ion-color-step-250: #404040;--ion-color-step-300: #4d4d4d;--ion-color-step-350: #595959;--ion-color-step-400: #666666;--ion-color-step-450: #737373;--ion-color-step-500: #808080;--ion-color-step-550: #8c8c8c;--ion-color-step-600: #999999;--ion-color-step-650: #a6a6a6;--ion-color-step-700: #b3b3b3;--ion-color-step-750: #bfbfbf;--ion-color-step-800: #cccccc;--ion-color-step-850: #d9d9d9;--ion-color-step-900: #e6e6e6;--ion-color-step-950: #f2f2f2;--ion-toolbar-background: #0d0d0d;--ion-item-background: #000000;--ion-card-background: #1c1c1d}.md[_ngcontent-%COMP%]   body[_ngcontent-%COMP%]{--ion-background-color: #121212;--ion-background-color-rgb: 18,18,18;--ion-text-color: #ffffff;--ion-text-color-rgb: 255,255,255;--ion-border-color: #222222;--ion-color-step-50: #1e1e1e;--ion-color-step-100: #2a2a2a;--ion-color-step-150: #363636;--ion-color-step-200: #414141;--ion-color-step-250: #4d4d4d;--ion-color-step-300: #595959;--ion-color-step-350: #656565;--ion-color-step-400: #717171;--ion-color-step-450: #7d7d7d;--ion-color-step-500: #898989;--ion-color-step-550: #949494;--ion-color-step-600: #a0a0a0;--ion-color-step-650: #acacac;--ion-color-step-700: #b8b8b8;--ion-color-step-750: #c4c4c4;--ion-color-step-800: #d0d0d0;--ion-color-step-850: #dbdbdb;--ion-color-step-900: #e7e7e7;--ion-color-step-950: #f3f3f3;--ion-item-background: #1e1e1e;--ion-toolbar-background: #1f1f1f;--ion-tab-bar-background: #1f1f1f;--ion-card-background: #1e1e1e}}[_nghost-%COMP%]   .item-interactive.ion-invalid[_ngcontent-%COMP%]{--highlight-background: rgba(0,0,0,0) !important}[_nghost-%COMP%]   .item-interactive.ion-valid[_ngcontent-%COMP%]{--highlight-background: #BDBDBD !important}.ion-button-three-inside[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:1rem;--background: $colorBackground;--background-hover: #8BC34A !important;--color-hover: #ffffff !important;--background-hover-opacity: 100%}\"]\n  });\n  return LocationsPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}