{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport jwt_decode from 'jwt-decode';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../../../services/conn-api/conn-api.service\";\nimport * as i3 from \"@angular/router\";\nexport let InvalidPage = /*#__PURE__*/(() => {\n  class InvalidPage {\n    constructor(toastController, connApi, router) {\n      this.toastController = toastController;\n      this.connApi = connApi;\n      this.router = router;\n      // Urls\n      this.urlRegistrationMail = \"registration/mail\";\n    }\n    ngOnInit() {\n      let token = localStorage.getItem('token');\n      if (token != null) {\n        let tokenInfo = jwt_decode(token);\n        let bVerified = tokenInfo['bVerified'];\n        if (bVerified == 1) this.router.navigate(['app-root']);\n      } else {\n        this.router.navigate(['login']);\n      }\n    }\n    onMail() {\n      this.connApi.safePost(this.urlRegistrationMail, null).subscribe(data => {\n        if (data.status == 200) {\n          this.toastSent();\n        }\n      }, error => {\n        if (error.status == 412) {\n          this.toastConfirmed();\n          localStorage.removeItem('token');\n          this.router.navigate(['login']);\n        }\n        console.log(error.message);\n      });\n    }\n    // Toasts\n    toastSent() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const toast = yield this.toastController.create({\n          message: 'E-Mail wurde versendet',\n          duration: 2500,\n          cssClass: 'my-toast',\n          position: 'bottom'\n        });\n        yield toast.present();\n      });\n    }\n    toastConfirmed() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const toast = yield this.toastController.create({\n          message: 'Deine E-Mail Adresse wurde bereits bestätigt',\n          duration: 2500,\n          cssClass: 'my-toast',\n          position: 'bottom'\n        });\n        yield toast.present();\n      });\n    }\n  }\n  InvalidPage.ɵfac = function InvalidPage_Factory(t) {\n    return new (t || InvalidPage)(i0.ɵɵdirectiveInject(i1.ToastController), i0.ɵɵdirectiveInject(i2.ConnApiService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  InvalidPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: InvalidPage,\n    selectors: [[\"app-invalid\"]],\n    decls: 19,\n    vars: 0,\n    consts: [[1, \"toolbar-subtitle\"], [1, \"input-background\"], [1, \"block-element-single\"], [1, \"block-head\"], [1, \"text-head\"], [1, \"block-text\"], [1, \"text-secondary\"], [1, \"ion-row-buttons\"], [3, \"click\"]],\n    template: function InvalidPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Handysammlerportal \");\n        i0.ɵɵelementStart(4, \"p\", 0);\n        i0.ɵɵtext(5, \"Best\\u00E4tigungs-Link ung\\u00FCltig\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(6, \"ion-content\", 1)(7, \"ion-grid\")(8, \"div\", 2)(9, \"div\", 3)(10, \"span\", 4);\n        i0.ɵɵtext(11, \"Hier ist etwas schief gelaufen\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 5)(13, \"p\", 6);\n        i0.ɵɵtext(14, \"Bitte klicke auf folgenden Button um einen neuen Best\\u00E4tigungs-Link per E-Mail zu erhalten Beachte, dass dieser nur f\\u00FCr einen begrenzten Zeitraum g\\u00FCltig ist.\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"ion-row\", 7)(16, \"ion-col\")(17, \"ion-button\", 8);\n        i0.ɵɵlistener(\"click\", function InvalidPage_Template_ion_button_click_17_listener() {\n          return ctx.onMail();\n        });\n        i0.ɵɵtext(18, \"Best\\u00E4tigungs-Link erneut zusenden\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n    }\n  });\n  return InvalidPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}